<b>VULNERABILITY DETAILS</b>
The JavaScript code below crashes Chromium 17.0.928.0 and d8 shell at function "v8::internal::WriteQuoteJsonString" with an invalid write.

<b>VERSION</b>
Chrome Version: 17.0.928.0 dev
Operating System: Ubuntu 11.04, tested on 64 bit

<b>REPRODUCTION CASE</b>
var a = [];
a[1999] = 'e';
JSON.stringify(a.join(("\u0094" )));


<b>FOR CRASHES, PLEASE INCLUDE THE FOLLOWING ADDITIONAL INFORMATION</b>
Type of crash: tab
Crash State:

GDB trace (no symbols for some reason, it's Chrome from Google directly):

Program received signal SIGSEGV, Segmentation fault.
0x00007ffff57968dc in ?? ()
(gdb) bt
#0  0x00007ffff57968dc in ?? ()
#1  0x00000e73665ae14e in ?? ()
#2  0x0000000600000000 in ?? ()
(gdb) x /4i $pc
=> 0x7ffff57968dc:      movzbl (%rdx,%rdi,1),%edi
   0x7ffff57968e0:      lea    (%r10,%rsi,1),%rsi
   0x7ffff57968e4:      movzbl (%rsi),%r8d
   0x7ffff57968e8:      cmp    $0x1,%edi
(gdb) info register rdx rdi edi
rdx            0x7ffff77dc400   140737345602560
rdi            0xffffff94       4294967188
edi            0xffffff94       -108

Valgrind on D8:

==23278== Invalid write of size 1
==23278==    at 0x824909F: _ZN2v88internalL20WriteQuoteJsonStringIccEEPT_PNS0_7IsolateES3_NS0_6VectorIKT0_EE.clone.199 (in /scratch/holler/LangFuzz/v8-3.6/d8)
==23278==  Address 0x5b080022 is not stack'd, malloc'd or (recently) free'd
==23278== 
==23278== 
==23278== Process terminating with default action of signal 11 (SIGSEGV)
==23278==  Bad permissions for mapped region at address 0x5B080022
==23278==    at 0x824909F: _ZN2v88internalL20WriteQuoteJsonStringIccEEPT_PNS0_7IsolateES3_NS0_6VectorIKT0_EE.clone.199 (in /scratch/holler/LangFuzz/v8-3.6/d8)
