"abstract_code" is not protected by Handle, and is use after a GC, which will cause use after free(gc moved this object)

void JavaScriptFrame::Summarize(std::vector<FrameSummary>* functions) const {
  DCHECK(functions->empty());
  Code code = LookupCode();      
  int offset = static_cast<int>(pc() - code.InstructionStart());
  AbstractCode abstract_code = AbstractCode::cast(code);    ---------------------> the raw point defines here
  Handle<FixedArray> params = GetParameters();  ---------->this function may call a GC.
  FrameSummary::JavaScriptFrameSummary summary(
      isolate(), receiver(), function(), abstract_code, offset, IsConstructor(),
      *params);----------->abstract_code is reused in this line
  functions->push_back(summary);
}


a poc is attached as re.js, run it with the following argument
./d8 --stress-compaction --detailed-error-stack-trace te.js
you'll got a crash backtrace as 

Thread 1 "d8" received signal SIGSEGV, Segmentation fault.
0x00007fed94ccbdfc in v8::base::Relaxed_Load (ptr=...) at atomicops_internals_portable.h:183
183	  return __atomic_load_n(ptr, __ATOMIC_RELAXED);
(gdb) bt
#0  0x00007fed94ccbdfc in v8::base::Relaxed_Load (ptr=...) at atomicops_internals_portable.h:183
#1  0x00007fed94ccbdad in v8::base::AsAtomicImpl<long>::Relaxed_Load<unsigned long> (addr=...) at atomic-utils.h:78
#2  0x00007fed94ccbd20 in v8::internal::FullObjectSlot::Relaxed_Load (this=...) at slots-inl.h:41
#3  0x00007fed94ccbc52 in v8::internal::HeapObject::map_word (this=...) at objects-inl.h:701
#4  0x00007fed94ccbb45 in v8::internal::HeapObject::map (this=...) at objects-inl.h:642
#5  0x00007fed92f013a5 in v8::internal::HeapObject::IsBytecodeArray (this=...) at instance-type-inl.h:64
#6  0x00007fed931da03c in v8::internal::FrameSummary::JavaScriptFrameSummary::JavaScriptFrameSummary (this=..., isolate=..., receiver=..., function=..., abstract_code=..., 
    code_offset=..., is_constructor=..., parameters=...) at frames.cc:1303
#7  0x00007fed931dcd8b in v8::internal::InterpretedFrame::Summarize (this=..., functions=...) at frames.cc:1785
#8  0x00007fed931eaea7 in v8::internal::Isolate::ComputeLocation (this=..., target=...) at isolate.cc:2059
#9  0x00007fed931ea1d7 in v8::internal::Isolate::Throw (this=..., raw_exception=..., location=...) at isolate.cc:1558
#10 0x00007fed92e9a8ed in v8::internal::Isolate::Throw<v8::internal::Object> (this=..., exception=..., location=...) at isolate.h:762
#11 0x00007fed933e828a in v8::internal::IC::ReferenceError (this=..., name=...) at ic.cc:319
#12 0x00007fed933e9197 in v8::internal::LoadIC::Load (this=..., object=..., name=...) at ic.cc:508
#13 0x00007fed933e9f3c in v8::internal::LoadGlobalIC::Load (this=..., name=...) at ic.cc:551
#14 0x00007fed933f72a5 in v8::internal::__RT_impl_Runtime_LoadGlobalIC_Miss (args=..., isolate=...) at ic.cc:2269
#15 0x00007fed933f6d72 in v8::internal::Runtime_LoadGlobalIC_Miss (args_length=..., args_object=..., isolate=...) at ic.cc:2244
#16 0x00007fed9452a920 in Builtins_CEntry_Return1_DontSaveFPRegs_ArgvOnStack_NoBuiltinExit () from /home/ggong/ssd2/v8/v8/out/x64.debug/libv8.so
#17 0x00007fed9469c083 in Builtins_LdaGlobalHandler () from /home/ggong/ssd2/v8/v8/out/x64.debug/libv8.so
#18 0x0000000100000000 in ?? ()
#19 0x00000fd139c5deb1 in ?? ()
#20 0x0000000000000000 in ?? ()

I've only tested this on V8 version 7.6.303.29, but the master branch is affected too.